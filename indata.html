<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>銀行入金データ生成ツール</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Helvetica Neue', Arial, 'Hiragino Sans', sans-serif;
            background: linear-gradient(135deg, #2c3e50, #34495e);
            min-height: 100vh;
            padding: 20px;
            color: white;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        .generator-section {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .section-title {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #ecf0f1;
        }
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .form-group {
            display: flex;
            flex-direction: column;
        }
        label {
            margin-bottom: 8px;
            font-weight: bold;
            color: #bdc3c7;
        }
        input, select, button {
            padding: 12px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 1em;
            transition: all 0.3s;
        }
        input:focus, select:focus {
            outline: none;
            border-color: #3498db;
            background: rgba(255,255,255,0.2);
        }
        input::placeholder {
            color: rgba(255,255,255,0.6);
        }
        button {
            background: linear-gradient(135deg, #3498db, #2980b9);
            border: none;
            cursor: pointer;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(52, 152, 219, 0.3);
        }
        .quick-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        .quick-btn {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            padding: 10px 20px;
            border-radius: 25px;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
        }
        .quick-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
        }
        .generated-data {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .deposit-item {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #3498db;
        }
        .deposit-header {
            display: flex;
            justify-content: between;
            margin-bottom: 10px;
        }
        .amount {
            font-size: 1.2em;
            font-weight: bold;
            color: #2ecc71;
        }
        .sender {
            color: #f39c12;
            font-weight: bold;
        }
        .timestamp {
            color: #95a5a6;
            font-size: 0.9em;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .stat-card {
            background: linear-gradient(135deg, #8e44ad, #9b59b6);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        .stat-value {
            font-size: 1.8em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }
        .bank-info {
            background: rgba(46, 204, 113, 0.2);
            border: 2px solid #2ecc71;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        .bank-account {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .demo-link {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #f39c12, #e67e22);
            padding: 15px 25px;
            border-radius: 50px;
            color: white;
            text-decoration: none;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(243, 156, 18, 0.4);
            transition: all 0.3s;
        }
        .demo-link:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(243, 156, 18, 0.6);
        }
    </style>
</head>
<body>
    <a href="http://localhost:6005/demo" class="demo-link">🎮 デモ画面へ</a>

    <div class="container">
        <h1>🏦 銀行入金データ生成ツール</h1>

        <div class="bank-info">
            <div class="bank-account">🏛️ エスクロー専用口座</div>
            <div>銀行: みずほ銀行 新宿支店</div>
            <div>口座番号: 1234567</div>
            <div>口座名: エスクロー株式会社</div>
        </div>

        <div class="generator-section">
            <div class="section-title">📊 クイック生成</div>
            <div class="quick-buttons">
                <button class="quick-btn" onclick="generateQuick('light')">軽い日 (10-15件)</button>
                <button class="quick-btn" onclick="generateQuick('normal')">通常日 (20-30件)</button>
                <button class="quick-btn" onclick="generateQuick('busy')">忙しい日 (40-50件)</button>
                <button class="quick-btn" onclick="generateQuick('heavy')">大忙し (60-80件)</button>
                <button class="quick-btn" onclick="clearAll()">🗑️ 全削除</button>
            </div>
        </div>

        <div class="generator-section">
            <div class="section-title">💰 個別入金生成</div>
            <div class="form-grid">
                <div class="form-group">
                    <label>送金者名</label>
                    <input type="text" id="sender-name" placeholder="例: 田中太郎" value="田中太郎">
                </div>
                <div class="form-group">
                    <label>送金額 (円)</label>
                    <input type="number" id="amount" placeholder="例: 1000000" value="1000000">
                </div>
                <div class="form-group">
                    <label>送金元銀行</label>
                    <select id="sender-bank">
                        <option value="三菱UFJ銀行">三菱UFJ銀行</option>
                        <option value="三井住友銀行">三井住友銀行</option>
                        <option value="みずほ銀行">みずほ銀行</option>
                        <option value="りそな銀行">りそな銀行</option>
                        <option value="ゆうちょ銀行">ゆうちょ銀行</option>
                        <option value="楽天銀行">楽天銀行</option>
                        <option value="住信SBIネット銀行">住信SBIネット銀行</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>送金目的</label>
                    <select id="purpose">
                        <option value="商品代金">商品代金</option>
                        <option value="サービス料金">サービス料金</option>
                        <option value="投資資金">投資資金</option>
                        <option value="取引決済">取引決済</option>
                        <option value="その他">その他</option>
                    </select>
                </div>
            </div>
            <button onclick="generateSingle()">単一入金生成</button>
        </div>

        <div class="generator-section">
            <div class="section-title">📋 生成された入金データ</div>
            <div class="stats" id="stats">
                <div class="stat-card">
                    <div class="stat-value" id="total-count">0</div>
                    <div class="stat-label">総件数</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="total-amount">¥0</div>
                    <div class="stat-label">総金額</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="avg-amount">¥0</div>
                    <div class="stat-label">平均金額</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="pending-count">0</div>
                    <div class="stat-label">未処理</div>
                </div>
            </div>
            <div class="generated-data" id="deposit-list">
                <p style="text-align: center; color: #95a5a6;">まだ入金データがありません</p>
            </div>
        </div>
    </div>

    <script>
        let deposits = [];
        let totalAmount = 0;

        const senderNames = [
            '田中太郎', '佐藤花子', '鈴木一郎', '高橋美咲', '伊藤誠',
            '山田雅子', '中村健太', '小林由美', '加藤翔太', '吉田麻衣',
            '久保田真一', '松本千春', '井上拓也', '木村綾乃', '林正樹',
            '清水恵子', '山口大輔', '森田彩香', '池田隆志', '橋本理恵'
        ];

        const companies = [
            '株式会社テックソリューション', '合同会社グローバルトレード', 'エクセレント商事株式会社',
            '株式会社イノベーションパートナーズ', '有限会社クリエイティブワークス', '株式会社デジタルマーケティング',
            'フューチャー投資株式会社', '株式会社ビジネスサポート', 'アドバンス商事有限会社',
            '株式会社プレミアムサービス'
        ];

        const purposes = ['商品代金', 'サービス料金', '投資資金', '取引決済', 'コンサルティング料', '仲介手数料'];
        const banks = ['三菱UFJ銀行', '三井住友銀行', 'みずほ銀行', 'りそな銀行', 'ゆうちょ銀行', '楽天銀行', '住信SBIネット銀行'];

        function generateRandomAmount() {
            const patterns = [
                () => Math.floor(Math.random() * 5000000) + 100000,      // 10万-500万
                () => Math.floor(Math.random() * 10000000) + 1000000,   // 100万-1000万
                () => Math.floor(Math.random() * 50000000) + 5000000,   // 500万-5000万
                () => Math.floor(Math.random() * 100000) + 50000        // 5万-15万
            ];
            const weights = [0.6, 0.25, 0.1, 0.05];
            const rand = Math.random();
            let cumulative = 0;
            for (let i = 0; i < weights.length; i++) {
                cumulative += weights[i];
                if (rand <= cumulative) {
                    return patterns[i]();
                }
            }
            return patterns[0]();
        }

        function generateSingle() {
            const senderName = document.getElementById('sender-name').value || getRandomSender();
            const amount = parseInt(document.getElementById('amount').value) || generateRandomAmount();
            const senderBank = document.getElementById('sender-bank').value;
            const purpose = document.getElementById('purpose').value;

            const deposit = {
                id: 'DEP_' + Date.now() + '_' + Math.random().toString(36).substr(2, 5),
                senderName: senderName,
                amount: amount,
                senderBank: senderBank,
                purpose: purpose,
                timestamp: new Date().toISOString(),
                status: 'pending'
            };

            deposits.push(deposit);
            totalAmount += amount;
            updateDisplay();
            sendToSystem(deposit);
        }

        function generateQuick(type) {
            let count;
            switch(type) {
                case 'light': count = Math.floor(Math.random() * 6) + 10; break;
                case 'normal': count = Math.floor(Math.random() * 11) + 20; break;
                case 'busy': count = Math.floor(Math.random() * 11) + 40; break;
                case 'heavy': count = Math.floor(Math.random() * 21) + 60; break;
            }

            for (let i = 0; i < count; i++) {
                setTimeout(() => {
                    const isCompany = Math.random() < 0.3;
                    const deposit = {
                        id: 'DEP_' + Date.now() + '_' + Math.random().toString(36).substr(2, 5),
                        senderName: isCompany ? getRandomCompany() : getRandomSender(),
                        amount: generateRandomAmount(),
                        senderBank: banks[Math.floor(Math.random() * banks.length)],
                        purpose: purposes[Math.floor(Math.random() * purposes.length)],
                        timestamp: new Date(Date.now() - Math.random() * 24 * 60 * 60 * 1000).toISOString(),
                        status: 'pending'
                    };

                    deposits.push(deposit);
                    totalAmount += deposit.amount;
                    updateDisplay();
                    sendToSystem(deposit);
                }, i * 100);
            }
        }

        function getRandomSender() {
            return senderNames[Math.floor(Math.random() * senderNames.length)];
        }

        function getRandomCompany() {
            return companies[Math.floor(Math.random() * companies.length)];
        }

        function clearAll() {
            if (confirm('すべての入金データを削除しますか？')) {
                deposits = [];
                totalAmount = 0;
                updateDisplay();
            }
        }

        function updateDisplay() {
            // 統計更新
            document.getElementById('total-count').textContent = deposits.length;
            document.getElementById('total-amount').textContent = '¥' + totalAmount.toLocaleString();
            document.getElementById('avg-amount').textContent = deposits.length > 0 ?
                '¥' + Math.floor(totalAmount / deposits.length).toLocaleString() : '¥0';
            document.getElementById('pending-count').textContent = deposits.filter(d => d.status === 'pending').length;

            // 入金リスト更新
            const listEl = document.getElementById('deposit-list');
            if (deposits.length === 0) {
                listEl.innerHTML = '<p style="text-align: center; color: #95a5a6;">まだ入金データがありません</p>';
                return;
            }

            // 最新順にソート
            const sortedDeposits = [...deposits].sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));

            listEl.innerHTML = sortedDeposits.map(deposit => `
                <div class="deposit-item">
                    <div class="deposit-header">
                        <span class="amount">¥${deposit.amount.toLocaleString()}</span>
                        <span class="timestamp">${new Date(deposit.timestamp).toLocaleString('ja-JP')}</span>
                    </div>
                    <div style="margin-bottom: 8px;">
                        <span class="sender">👤 ${deposit.senderName}</span>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.9em;">
                        <div>🏦 ${deposit.senderBank}</div>
                        <div>📋 ${deposit.purpose}</div>
                    </div>
                    <div style="margin-top: 8px; font-size: 0.8em; color: #95a5a6;">
                        ID: ${deposit.id}
                    </div>
                </div>
            `).join('');
        }

        async function sendToSystem(deposit) {
            try {
                // エスクローシステムに入金データを送信
                const response = await fetch('http://localhost:6005/api/demo/deposit', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        id: deposit.id,
                        client_id: 'BANK_CLIENT',
                        amount: deposit.amount,
                        sender_name: deposit.senderName,
                        sender_bank: deposit.senderBank,
                        purpose: deposit.purpose,
                        timestamp: deposit.timestamp
                    })
                });

                if (response.ok) {
                    console.log('入金データをシステムに送信しました:', deposit.id);
                }
            } catch (error) {
                console.error('システム送信エラー:', error);
            }
        }

        // 初期化
        updateDisplay();
    </script>
</body>
</html>