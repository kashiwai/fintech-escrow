<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>éŠ€è¡Œå…¥é‡‘ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆãƒ„ãƒ¼ãƒ«</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Helvetica Neue', Arial, 'Hiragino Sans', sans-serif;
            background: linear-gradient(135deg, #2c3e50, #34495e);
            min-height: 100vh;
            padding: 20px;
            color: white;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        .generator-section {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .section-title {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #ecf0f1;
        }
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .form-group {
            display: flex;
            flex-direction: column;
        }
        label {
            margin-bottom: 8px;
            font-weight: bold;
            color: #bdc3c7;
        }
        input, select, button {
            padding: 12px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 1em;
            transition: all 0.3s;
        }
        input:focus, select:focus {
            outline: none;
            border-color: #3498db;
            background: rgba(255,255,255,0.2);
        }
        input::placeholder {
            color: rgba(255,255,255,0.6);
        }
        button {
            background: linear-gradient(135deg, #3498db, #2980b9);
            border: none;
            cursor: pointer;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(52, 152, 219, 0.3);
        }
        .quick-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        .quick-btn {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            padding: 10px 20px;
            border-radius: 25px;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
        }
        .quick-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
        }
        .generated-data {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .deposit-item {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #3498db;
        }
        .deposit-header {
            display: flex;
            justify-content: between;
            margin-bottom: 10px;
        }
        .amount {
            font-size: 1.2em;
            font-weight: bold;
            color: #2ecc71;
        }
        .sender {
            color: #f39c12;
            font-weight: bold;
        }
        .timestamp {
            color: #95a5a6;
            font-size: 0.9em;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .stat-card {
            background: linear-gradient(135deg, #8e44ad, #9b59b6);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        .stat-value {
            font-size: 1.8em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }
        .bank-info {
            background: rgba(46, 204, 113, 0.2);
            border: 2px solid #2ecc71;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        .bank-account {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .demo-link {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #f39c12, #e67e22);
            padding: 15px 25px;
            border-radius: 50px;
            color: white;
            text-decoration: none;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(243, 156, 18, 0.4);
            transition: all 0.3s;
        }
        .demo-link:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(243, 156, 18, 0.6);
        }
    </style>
</head>
<body>
    <a href="http://localhost:6005/demo" class="demo-link">ğŸ® ãƒ‡ãƒ¢ç”»é¢ã¸</a>

    <div class="container">
        <h1>ğŸ¦ éŠ€è¡Œå…¥é‡‘ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆãƒ„ãƒ¼ãƒ«</h1>

        <div class="bank-info">
            <div class="bank-account">ğŸ›ï¸ ã‚¨ã‚¹ã‚¯ãƒ­ãƒ¼å°‚ç”¨å£åº§</div>
            <div>éŠ€è¡Œ: ã¿ãšã»éŠ€è¡Œ æ–°å®¿æ”¯åº—</div>
            <div>å£åº§ç•ªå·: 1234567</div>
            <div>å£åº§å: ã‚¨ã‚¹ã‚¯ãƒ­ãƒ¼æ ªå¼ä¼šç¤¾</div>
        </div>

        <div class="generator-section">
            <div class="section-title">ğŸ“Š ã‚¯ã‚¤ãƒƒã‚¯ç”Ÿæˆ</div>
            <div class="quick-buttons">
                <button class="quick-btn" onclick="generateQuick('light')">è»½ã„æ—¥ (10-15ä»¶)</button>
                <button class="quick-btn" onclick="generateQuick('normal')">é€šå¸¸æ—¥ (20-30ä»¶)</button>
                <button class="quick-btn" onclick="generateQuick('busy')">å¿™ã—ã„æ—¥ (40-50ä»¶)</button>
                <button class="quick-btn" onclick="generateQuick('heavy')">å¤§å¿™ã— (60-80ä»¶)</button>
                <button class="quick-btn" onclick="clearAll()">ğŸ—‘ï¸ å…¨å‰Šé™¤</button>
            </div>
        </div>

        <div class="generator-section">
            <div class="section-title">ğŸ’° å€‹åˆ¥å…¥é‡‘ç”Ÿæˆ</div>
            <div class="form-grid">
                <div class="form-group">
                    <label>é€é‡‘è€…å</label>
                    <input type="text" id="sender-name" placeholder="ä¾‹: ç”°ä¸­å¤ªéƒ" value="ç”°ä¸­å¤ªéƒ">
                </div>
                <div class="form-group">
                    <label>é€é‡‘é¡ (å††)</label>
                    <input type="number" id="amount" placeholder="ä¾‹: 1000000" value="1000000">
                </div>
                <div class="form-group">
                    <label>é€é‡‘å…ƒéŠ€è¡Œ</label>
                    <select id="sender-bank">
                        <option value="ä¸‰è±UFJéŠ€è¡Œ">ä¸‰è±UFJéŠ€è¡Œ</option>
                        <option value="ä¸‰äº•ä½å‹éŠ€è¡Œ">ä¸‰äº•ä½å‹éŠ€è¡Œ</option>
                        <option value="ã¿ãšã»éŠ€è¡Œ">ã¿ãšã»éŠ€è¡Œ</option>
                        <option value="ã‚ŠããªéŠ€è¡Œ">ã‚ŠããªéŠ€è¡Œ</option>
                        <option value="ã‚†ã†ã¡ã‚‡éŠ€è¡Œ">ã‚†ã†ã¡ã‚‡éŠ€è¡Œ</option>
                        <option value="æ¥½å¤©éŠ€è¡Œ">æ¥½å¤©éŠ€è¡Œ</option>
                        <option value="ä½ä¿¡SBIãƒãƒƒãƒˆéŠ€è¡Œ">ä½ä¿¡SBIãƒãƒƒãƒˆéŠ€è¡Œ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>é€é‡‘ç›®çš„</label>
                    <select id="purpose">
                        <option value="å•†å“ä»£é‡‘">å•†å“ä»£é‡‘</option>
                        <option value="ã‚µãƒ¼ãƒ“ã‚¹æ–™é‡‘">ã‚µãƒ¼ãƒ“ã‚¹æ–™é‡‘</option>
                        <option value="æŠ•è³‡è³‡é‡‘">æŠ•è³‡è³‡é‡‘</option>
                        <option value="å–å¼•æ±ºæ¸ˆ">å–å¼•æ±ºæ¸ˆ</option>
                        <option value="ãã®ä»–">ãã®ä»–</option>
                    </select>
                </div>
            </div>
            <button onclick="generateSingle()">å˜ä¸€å…¥é‡‘ç”Ÿæˆ</button>
        </div>

        <div class="generator-section">
            <div class="section-title">ğŸ“‹ ç”Ÿæˆã•ã‚ŒãŸå…¥é‡‘ãƒ‡ãƒ¼ã‚¿</div>
            <div class="stats" id="stats">
                <div class="stat-card">
                    <div class="stat-value" id="total-count">0</div>
                    <div class="stat-label">ç·ä»¶æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="total-amount">Â¥0</div>
                    <div class="stat-label">ç·é‡‘é¡</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="avg-amount">Â¥0</div>
                    <div class="stat-label">å¹³å‡é‡‘é¡</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="pending-count">0</div>
                    <div class="stat-label">æœªå‡¦ç†</div>
                </div>
            </div>
            <div class="generated-data" id="deposit-list">
                <p style="text-align: center; color: #95a5a6;">ã¾ã å…¥é‡‘ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</p>
            </div>
        </div>
    </div>

    <script>
        let deposits = [];
        let totalAmount = 0;

        const senderNames = [
            'ç”°ä¸­å¤ªéƒ', 'ä½è—¤èŠ±å­', 'éˆ´æœ¨ä¸€éƒ', 'é«˜æ©‹ç¾å’²', 'ä¼Šè—¤èª ',
            'å±±ç”°é›…å­', 'ä¸­æ‘å¥å¤ª', 'å°æ—ç”±ç¾', 'åŠ è—¤ç¿”å¤ª', 'å‰ç”°éº»è¡£',
            'ä¹…ä¿ç”°çœŸä¸€', 'æ¾æœ¬åƒæ˜¥', 'äº•ä¸Šæ‹“ä¹Ÿ', 'æœ¨æ‘ç¶¾ä¹ƒ', 'æ—æ­£æ¨¹',
            'æ¸…æ°´æµå­', 'å±±å£å¤§è¼”', 'æ£®ç”°å½©é¦™', 'æ± ç”°éš†å¿—', 'æ©‹æœ¬ç†æµ'
        ];

        const companies = [
            'æ ªå¼ä¼šç¤¾ãƒ†ãƒƒã‚¯ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³', 'åˆåŒä¼šç¤¾ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒˆãƒ¬ãƒ¼ãƒ‰', 'ã‚¨ã‚¯ã‚»ãƒ¬ãƒ³ãƒˆå•†äº‹æ ªå¼ä¼šç¤¾',
            'æ ªå¼ä¼šç¤¾ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã‚º', 'æœ‰é™ä¼šç¤¾ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ãƒ¯ãƒ¼ã‚¯ã‚¹', 'æ ªå¼ä¼šç¤¾ãƒ‡ã‚¸ã‚¿ãƒ«ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°',
            'ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ•è³‡æ ªå¼ä¼šç¤¾', 'æ ªå¼ä¼šç¤¾ãƒ“ã‚¸ãƒã‚¹ã‚µãƒãƒ¼ãƒˆ', 'ã‚¢ãƒ‰ãƒãƒ³ã‚¹å•†äº‹æœ‰é™ä¼šç¤¾',
            'æ ªå¼ä¼šç¤¾ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã‚µãƒ¼ãƒ“ã‚¹'
        ];

        const purposes = ['å•†å“ä»£é‡‘', 'ã‚µãƒ¼ãƒ“ã‚¹æ–™é‡‘', 'æŠ•è³‡è³‡é‡‘', 'å–å¼•æ±ºæ¸ˆ', 'ã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°æ–™', 'ä»²ä»‹æ‰‹æ•°æ–™'];
        const banks = ['ä¸‰è±UFJéŠ€è¡Œ', 'ä¸‰äº•ä½å‹éŠ€è¡Œ', 'ã¿ãšã»éŠ€è¡Œ', 'ã‚ŠããªéŠ€è¡Œ', 'ã‚†ã†ã¡ã‚‡éŠ€è¡Œ', 'æ¥½å¤©éŠ€è¡Œ', 'ä½ä¿¡SBIãƒãƒƒãƒˆéŠ€è¡Œ'];

        function generateRandomAmount() {
            const patterns = [
                () => Math.floor(Math.random() * 5000000) + 100000,      // 10ä¸‡-500ä¸‡
                () => Math.floor(Math.random() * 10000000) + 1000000,   // 100ä¸‡-1000ä¸‡
                () => Math.floor(Math.random() * 50000000) + 5000000,   // 500ä¸‡-5000ä¸‡
                () => Math.floor(Math.random() * 100000) + 50000        // 5ä¸‡-15ä¸‡
            ];
            const weights = [0.6, 0.25, 0.1, 0.05];
            const rand = Math.random();
            let cumulative = 0;
            for (let i = 0; i < weights.length; i++) {
                cumulative += weights[i];
                if (rand <= cumulative) {
                    return patterns[i]();
                }
            }
            return patterns[0]();
        }

        function generateSingle() {
            const senderName = document.getElementById('sender-name').value || getRandomSender();
            const amount = parseInt(document.getElementById('amount').value) || generateRandomAmount();
            const senderBank = document.getElementById('sender-bank').value;
            const purpose = document.getElementById('purpose').value;

            const deposit = {
                id: 'DEP_' + Date.now() + '_' + Math.random().toString(36).substr(2, 5),
                senderName: senderName,
                amount: amount,
                senderBank: senderBank,
                purpose: purpose,
                timestamp: new Date().toISOString(),
                status: 'pending'
            };

            deposits.push(deposit);
            totalAmount += amount;
            updateDisplay();
            sendToSystem(deposit);
        }

        function generateQuick(type) {
            let count;
            switch(type) {
                case 'light': count = Math.floor(Math.random() * 6) + 10; break;
                case 'normal': count = Math.floor(Math.random() * 11) + 20; break;
                case 'busy': count = Math.floor(Math.random() * 11) + 40; break;
                case 'heavy': count = Math.floor(Math.random() * 21) + 60; break;
            }

            for (let i = 0; i < count; i++) {
                setTimeout(() => {
                    const isCompany = Math.random() < 0.3;
                    const deposit = {
                        id: 'DEP_' + Date.now() + '_' + Math.random().toString(36).substr(2, 5),
                        senderName: isCompany ? getRandomCompany() : getRandomSender(),
                        amount: generateRandomAmount(),
                        senderBank: banks[Math.floor(Math.random() * banks.length)],
                        purpose: purposes[Math.floor(Math.random() * purposes.length)],
                        timestamp: new Date(Date.now() - Math.random() * 24 * 60 * 60 * 1000).toISOString(),
                        status: 'pending'
                    };

                    deposits.push(deposit);
                    totalAmount += deposit.amount;
                    updateDisplay();
                    sendToSystem(deposit);
                }, i * 100);
            }
        }

        function getRandomSender() {
            return senderNames[Math.floor(Math.random() * senderNames.length)];
        }

        function getRandomCompany() {
            return companies[Math.floor(Math.random() * companies.length)];
        }

        function clearAll() {
            if (confirm('ã™ã¹ã¦ã®å…¥é‡‘ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                deposits = [];
                totalAmount = 0;
                updateDisplay();
            }
        }

        function updateDisplay() {
            // çµ±è¨ˆæ›´æ–°
            document.getElementById('total-count').textContent = deposits.length;
            document.getElementById('total-amount').textContent = 'Â¥' + totalAmount.toLocaleString();
            document.getElementById('avg-amount').textContent = deposits.length > 0 ?
                'Â¥' + Math.floor(totalAmount / deposits.length).toLocaleString() : 'Â¥0';
            document.getElementById('pending-count').textContent = deposits.filter(d => d.status === 'pending').length;

            // å…¥é‡‘ãƒªã‚¹ãƒˆæ›´æ–°
            const listEl = document.getElementById('deposit-list');
            if (deposits.length === 0) {
                listEl.innerHTML = '<p style="text-align: center; color: #95a5a6;">ã¾ã å…¥é‡‘ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</p>';
                return;
            }

            // æœ€æ–°é †ã«ã‚½ãƒ¼ãƒˆ
            const sortedDeposits = [...deposits].sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));

            listEl.innerHTML = sortedDeposits.map(deposit => `
                <div class="deposit-item">
                    <div class="deposit-header">
                        <span class="amount">Â¥${deposit.amount.toLocaleString()}</span>
                        <span class="timestamp">${new Date(deposit.timestamp).toLocaleString('ja-JP')}</span>
                    </div>
                    <div style="margin-bottom: 8px;">
                        <span class="sender">ğŸ‘¤ ${deposit.senderName}</span>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.9em;">
                        <div>ğŸ¦ ${deposit.senderBank}</div>
                        <div>ğŸ“‹ ${deposit.purpose}</div>
                    </div>
                    <div style="margin-top: 8px; font-size: 0.8em; color: #95a5a6;">
                        ID: ${deposit.id}
                    </div>
                </div>
            `).join('');
        }

        async function sendToSystem(deposit) {
            try {
                // ã‚¨ã‚¹ã‚¯ãƒ­ãƒ¼ã‚·ã‚¹ãƒ†ãƒ ã«å…¥é‡‘ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡
                const response = await fetch('http://localhost:6005/api/demo/deposit', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        id: deposit.id,
                        client_id: 'BANK_CLIENT',
                        amount: deposit.amount,
                        sender_name: deposit.senderName,
                        sender_bank: deposit.senderBank,
                        purpose: deposit.purpose,
                        timestamp: deposit.timestamp
                    })
                });

                if (response.ok) {
                    console.log('å…¥é‡‘ãƒ‡ãƒ¼ã‚¿ã‚’ã‚·ã‚¹ãƒ†ãƒ ã«é€ä¿¡ã—ã¾ã—ãŸ:', deposit.id);
                }
            } catch (error) {
                console.error('ã‚·ã‚¹ãƒ†ãƒ é€ä¿¡ã‚¨ãƒ©ãƒ¼:', error);
            }
        }

        // åˆæœŸåŒ–
        updateDisplay();
    </script>
</body>
</html>